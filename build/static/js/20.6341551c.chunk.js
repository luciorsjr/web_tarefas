(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[20],{765:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));var r,c=n(706),a=n(705),i=n(707),o=n(1),s=n(702),l=n(703),u=n(704),j=n(32);function d(){var e=Object(u.a)(),t=Object(o.useState)(!0),n=Object(i.a)(t,2),d=n[0],b=n[1],O=Object(o.useState)([]),f=Object(i.a)(O,2),x=f[0],h=f[1],m=Object(o.useState)(!1),p=Object(i.a)(m,2),v=p[0],w=p[1],k=Object(o.useState)(!1),g=Object(i.a)(k,2),y=g[0],C=g[1],S=Object(o.useState)(""),U=Object(i.a)(S,2),_=U[0],F=U[1],E=Object(o.useState)(""),P=Object(i.a)(E,2),z=P[0],D=P[1],I=Object(o.useState)(""),N=Object(i.a)(I,2),T=N[0],H=N[1],J=Object(o.useState)([]),q=Object(i.a)(J,2),A=q[0],B=q[1],G=Object(o.useState)(null),K=Object(i.a)(G,2),L=K[0],V=K[1];Object(o.useEffect)((function(){M()}),[]),Object(o.useEffect)((function(){""!==T&&(clearTimeout(r),r=setTimeout(X,1500))}),[T]);var X=function(){var t=Object(a.a)(Object(c.a)().mark((function t(){var n;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===T){t.next=5;break}return t.next=3,e.searchUser(T);case 3:""===(n=t.sent).error?B(n.list):alert(n.error);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=Object(a.a)(Object(c.a)().mark((function t(){var n;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(!0),t.next=3,e.getUnits();case 3:n=t.sent,b(!1),""===n.error?h(n.list):h(n.error);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Q=function(){w(!1)},R=function(){var t=Object(a.a)(Object(c.a)().mark((function t(n){var r;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Tem certeza que deseja excluir?")){t.next=5;break}return t.next=3,e.removeUnit(n);case 3:""===(r=t.sent).error?M():alert(r.error);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),W=function(){var t=Object(a.a)(Object(c.a)().mark((function t(){var n,r;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z){t.next=16;break}if(C(!0),r={name:z,id_owner:L.id},""!==_){t.next=9;break}return t.next=6,e.addUnit(r);case 6:n=t.sent,t.next=12;break;case 9:return t.next=11,e.updateUnit(_,r);case 11:n=t.sent;case 12:C(!1),""===n.error?(w(!1),M()):alert(n.error),t.next=17;break;case 16:alert("Preencha os campos!");case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(s.K,{children:Object(j.jsxs)(s.m,{children:[Object(j.jsx)("h2",{children:"Unidades"}),Object(j.jsxs)(s.h,{children:[Object(j.jsx)(s.l,{children:Object(j.jsxs)(s.e,{color:"primary",onClick:function(){F(""),D(""),V(null),B([]),H(""),w(!0)},children:[Object(j.jsx)(l.a,{name:"cil-check"}),"Nova Unidade"]})}),Object(j.jsx)(s.i,{children:Object(j.jsx)(s.p,{items:x,fields:[{label:"Unidade",key:"name",sorter:!1},{label:"Propriet\xe1rio",key:"name_owner",sorter:!1},{label:"A\xe7\xf5es",key:"actions",_style:{width:"1px"},sorter:!1,filter:!1}],loading:d,noItemsViewSlot:" ",columnFilter:!0,sorter:!0,hover:!0,striped:!0,bordered:!0,pagination:!0,itemsPerPage:10,scopedSlots:{name_owner:function(e){var t;return Object(j.jsx)("td",{children:null!==(t=e.name_owner)&&void 0!==t?t:"-"})},actions:function(e){return Object(j.jsx)("td",{children:Object(j.jsxs)(s.f,{children:[Object(j.jsx)(s.e,{color:"success",onClick:null,children:"Detalhes"}),Object(j.jsx)(s.e,{color:"info",onClick:function(){return function(e){var t=x.findIndex((function(t){return t.id===e}));F(x[t].id),D(x[t].name),B([]),H(""),x[t].name_owner?V({name:x[t].name_owner,id:x[t].id_owner}):V(null),w(!0)}(e.id)},children:"Editar"}),Object(j.jsx)(s.e,{color:"danger",onClick:function(){return R(e.id)},children:"Excluir"})]})})}}})})]})]})}),Object(j.jsxs)(s.F,{show:v,onClose:Q,children:[Object(j.jsxs)(s.I,{closeButton:!0,children:[""===_?"Nova":"Editar"," Unidade"]}),Object(j.jsxs)(s.G,{children:[Object(j.jsxs)(s.x,{children:[Object(j.jsx)(s.D,{htmlFor:"modal-name",children:"Nome da unidade"}),Object(j.jsx)(s.y,{type:"text",id:"modal-name",value:z,onChange:function(e){return D(e.target.value)}})]}),Object(j.jsxs)(s.x,{children:[Object(j.jsx)(s.D,{htmlFor:"modal-owner",children:"Propriet\xe1rio (nome,cpf ou e-mail)"}),null===L&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(s.y,{type:"text",id:"modal-owner",value:T,onChange:function(e){return H(e.target.value)}}),A.length>0&&Object(j.jsx)(s.L,{sizeHtml:5,onChange:function(e){return function(e){var t=A.find((function(t){return t.id===e}));V(t),B([]),H("")}(e.target.value)},children:A.map((function(e,t){return Object(j.jsx)("option",{value:e.id,children:e.name},t)}))})]}),null!==L&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("br",{}),Object(j.jsx)(s.e,{size:"sm",color:"danger",onClick:function(){return V(null)},children:"X"}),L.name]})]})]}),Object(j.jsxs)(s.H,{children:[Object(j.jsx)(s.e,{color:"primary",onClick:W,disabled:y,children:y?"Carregando...":"Salvar"}),Object(j.jsx)(s.e,{color:"secondary",onClick:Q,disabled:y,children:y?"Carregando...":"Cancelar"})]})]})]})}}}]);
//# sourceMappingURL=20.6341551c.chunk.js.map